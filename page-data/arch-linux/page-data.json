{"componentChunkName":"component---src-templates-blog-post-js","path":"/arch-linux/","result":{"data":{"site":{"siteMetadata":{"title":"拨鼠哥哥的部落格"}},"markdownRemark":{"id":"3fd945c7-7b64-5dbd-bec1-264724f5da7f","excerpt":"装了很多回 archlinux ，跟了很多遍各种教程和官方 wiki ，也来自己写一个简单的笔记吧。 安装之前的准备略去不写，就从 archlinux 的 iso 启动之后开始吧。其实 archlinux 也只是安装过程看上去高级一点，滚动更新的理念和大部分所谓主流发行版有点区别，用惯了 TUI 操作的人对于无 GUI…","html":"<p>装了很多回 archlinux ，跟了很多遍各种教程和官方 wiki ，也来自己写一个简单的笔记吧。</p>\n<p>安装之前的准备略去不写，就从 archlinux 的 iso 启动之后开始吧。其实 archlinux 也只是安装过程<strong>看上去</strong>高级一点，滚动更新的理念和大部分所谓主流发行版有点区别，用惯了 TUI 操作的人对于无 GUI 操作应当还是比较适应的，更何况提供了好几个 Terminal 可以多线程操作，避免在等待的时候没事干（不是），甚至看到有老哥速通 archlinux 安装（这居然也有速通？）</p>\n<p>至于跟 archlinux 这个话题有关的争议，反正不在这个笔记的叙述范围之内，快速进入正题吧。</p>\n<p>进入 archlinux 安装环境之后，我们选择 <code class=\"language-text\">Arch Linux install medium (x86_64, UEFI)</code> 进入 archlinux 的安装环境，这是一个比较小的 live 系统，其 bash 已经可以给我们完成很多任务。</p>\n<p>archlinux 镜像中现在启用了 <code class=\"language-text\">reflector</code> 服务，会自己更新镜像源，然而在存在 GFW 的特殊网络环境中，这个服务并不适合被启用，我们还是老老实实地禁用它吧。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl stop reflector.service</code></pre></div>\n<p>查看服务状态，按<code class=\"language-text\">q</code>退出</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl status reflector.service</code></pre></div>\n<p>确认 <code class=\"language-text\">UEFI</code> 模式（保险起见）</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ls</span> /sys/firmware/efi/efivars</code></pre></div>\n<p>若有输出即是 <code class=\"language-text\">UEFI</code></p>\n<p>如果使用无线网络（有线跳过即可）：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">iwctl <span class=\"token comment\"># 进入交互式命令行</span>\r\ndevice list <span class=\"token comment\"># 列出无线网卡设备名，比如无线网卡看到叫 wlan0</span>\r\nstation wlan0 scan <span class=\"token comment\"># 扫描网络</span>\r\nstation wlan0 get-networks <span class=\"token comment\"># 列出所有 wifi 网络</span>\r\nstation wlan0 connect wifi-name <span class=\"token comment\"># 进行连接，注意这里无法输入中文。回车后输入密码即可</span>\r\n<span class=\"token builtin class-name\">exit</span> <span class=\"token comment\"># 连接成功后退出</span></code></pre></div>\n<p>随便 <code class=\"language-text\">ping</code> 一个网站，应该能看到网络的连接情况。按 <code class=\"language-text\">Ctrl+C</code> 退出。</p>\n<p>同步时钟：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">timedatectl set-ntp <span class=\"token boolean\">true</span>\r\ntimedatectl status</code></pre></div>\n<p>更新国内镜像源：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vim</span> /etc/pacman.d/mirrorlist</code></pre></div>\n<p>在最上面加入以下镜像源的任意一条</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Server <span class=\"token operator\">=</span> https://mirrors.tuna.tsinghua.edu.cn/archlinux/<span class=\"token variable\">$repo</span>/os/<span class=\"token variable\">$arch</span> <span class=\"token comment\"># 清华大学开源软件镜像站</span>\r\nServer <span class=\"token operator\">=</span> https://repo.huaweicloud.com/archlinux/<span class=\"token variable\">$repo</span>/os/<span class=\"token variable\">$arch</span> <span class=\"token comment\"># 华为开源镜像站</span>\r\nServer <span class=\"token operator\">=</span> http://mirror.lzu.edu.cn/archlinux/<span class=\"token variable\">$repo</span>/os/<span class=\"token variable\">$arch</span> <span class=\"token comment\"># 兰州大学开源镜像站</span>\r\nServer <span class=\"token operator\">=</span> https://mirrors.ustc.edu.cn/archlinux/<span class=\"token variable\">$repo</span>/os/<span class=\"token variable\">$arch</span> <span class=\"token comment\"># 中国科学技术大学开源镜像站</span></code></pre></div>\n<p><del>你问我为什么把科大放最下面？</del><strong>我就爱用 thu 源</strong></p>\n<p>现在我们进入磁盘分区阶段。</p>\n<p>使用 <code class=\"language-text\">lsblk</code> 查看当前磁盘的情况，找到要用的磁盘和分区</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">lsblk</code></pre></div>\n<p>使用 <code class=\"language-text\">cfdisk</code> 对需要使用的磁盘分区：注意，SATA 磁盘名称为 sdx (x=a~z)，NVME 磁盘名称为 nvmexn1 (x=0~n)。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cfdisk</span> /dev/sdx</code></pre></div>\n<p>使用上下方向键在需要操作的分区中移动，使用左右方向键在不同的操作中移动。我们 <code class=\"language-text\">[New]</code> 一个分区，指定大小，默认为 <code class=\"language-text\">Linux filesystem</code>，我们再选中并更改类型即可。</p>\n<p>我们需要：一个内存大小 50% ~ 100% 的 <code class=\"language-text\">Swap</code> 分区，类型为 <code class=\"language-text\">Linux swap</code>，一个自定义大小的分区（2GiB 以上），类型为 <code class=\"language-text\">Linux filesystem</code>，因为我们使用 <code class=\"language-text\">Btrfs</code> 文件系统。</p>\n<p><code class=\"language-text\">[Write]</code> 并且 <code class=\"language-text\">[Quit]</code>，这时将对磁盘进行操作，这个操作<strong>不可逆</strong>！谨慎删除分区！</p>\n<p>使用 <code class=\"language-text\">fdisk -l</code> 查看分区的情况</p>\n<p>先写到这里</p>","frontmatter":{"title":"archlinux 简明安装指南","date":"2023, 08, 13","description":null}},"previous":{"fields":{"slug":"/zhongguo-zai-liangzhuang/"},"frontmatter":{"title":"知识分子的回望——读《中国在梁庄》"}},"next":{"fields":{"slug":"/record/"},"frontmatter":{"title":"琐碎想法记录"}}},"pageContext":{"id":"3fd945c7-7b64-5dbd-bec1-264724f5da7f","previousPostId":"e8f79a48-62ae-5bab-8295-e466bf544732","nextPostId":"22350ce0-ddc9-52e6-a469-8ee963838c64"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}